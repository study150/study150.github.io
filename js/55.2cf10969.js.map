{"version":3,"file":"js/55.2cf10969.js","mappings":"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","sources":["webpack://headline/./src/views/login/Login.vue","webpack://headline/src/views/login/Login.vue","webpack://headline/./src/views/login/Login.vue?8cb8","webpack://headline/./src/views/login/Login.vue?95ed"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"top\"},[_c('span',[_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"color\":\"#ffffff\"},on:{\"click\":_vm.back}})],1),_c('div',[_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"登录\")]),_c('a',[_vm._v(\"/\")]),_c('router-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"注册\")])],1)]),_c('div',{staticClass:\"registerForm\"},[_c('van-form',{ref:\"form\",on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"username\",\"label\":\"手机号\",\"placeholder\":\"手机号\",\"rules\":[\n          { required: true, message: '请填写用户名' },\n          { pattern: _vm.regUsername, message: '请输入正确的手机号' },\n        ]},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"password\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[\n          { required: true, message: '请填写密码' },\n          { pattern: _vm.regPassword, message: '请输入6-12位的密码' },\n        ]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticClass:\"yzm\"},[_c('van-field',{attrs:{\"name\":\"vercode\",\"center\":\"\",\"clearable\":\"\",\"rules\":[{ pattern: _vm.regSms, message: '请输入6位的验证码' }],\"label\":\"短信验证码\",\"placeholder\":\"请输入短信验证码\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{attrs:{\"loading\":_vm.loading,\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.sendYzm}},[_vm._v(_vm._s(_vm.tips))])]},proxy:true}]),model:{value:(_vm.vercode),callback:function ($$v) {_vm.vercode=$$v},expression:\"vercode\"}})],1),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login\">\r\n    <!-- <h1>注册</h1> -->\r\n    <!-- 头部 -->\r\n    <div class=\"top\">\r\n      <span>\r\n        <van-icon name=\"arrow-left\" color=\"#ffffff\" @click=\"back\" />\r\n      </span>\r\n      <div>\r\n        <router-link to=\"/register\">登录</router-link>\r\n        <a>/</a>\r\n        <router-link to=\"/login\">注册</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 注册区 -->\r\n    <div class=\"registerForm\">\r\n      <van-form @submit=\"onSubmit\" ref=\"form\">\r\n        <van-field\r\n          v-model=\"username\"\r\n          name=\"username\"\r\n          label=\"手机号\"\r\n          placeholder=\"手机号\"\r\n          :rules=\"[\r\n            { required: true, message: '请填写用户名' },\r\n            { pattern: regUsername, message: '请输入正确的手机号' },\r\n          ]\"\r\n        />\r\n        <van-field\r\n          v-model=\"password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[\r\n            { required: true, message: '请填写密码' },\r\n            { pattern: regPassword, message: '请输入6-12位的密码' },\r\n          ]\"\r\n        />\r\n        <!-- 验证码 -->\r\n        <div class=\"yzm\">\r\n          <van-field\r\n            v-model=\"vercode\"\r\n            name=\"vercode\"\r\n            center\r\n            clearable\r\n            :rules=\"[{ pattern: regSms, message: '请输入6位的验证码' }]\"\r\n            label=\"短信验证码\"\r\n            placeholder=\"请输入短信验证码\"\r\n          >\r\n            <template #button>\r\n              <van-button\r\n                @click=\"sendYzm\"\r\n                :loading=\"loading\"\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                >{{ tips }}</van-button\r\n              >\r\n            </template>\r\n          </van-field>\r\n        </div>\r\n        <div style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" native-type=\"submit\"\r\n            >提交</van-button\r\n          >\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { NavBar, Form, Field, Loading } from \"vant\";\r\n// 引入单独的axios\r\nimport { userSendSms, userReg } from \"@/api/login.js\";\r\n\r\nlet times = null;\r\nexport default {\r\n  name: \"Login\",\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [Form.name]: Form,\r\n    [Field.name]: Field,\r\n    [Loading.name]: Loading,\r\n  },\r\n  data() {\r\n    return {\r\n      username: \"\", //手机号\r\n      password: \"\", // 密码\r\n      vercode: \"\", //验证码\r\n\r\n      regUsername: /^1[345789]\\d{9}$/, // 正则验证手机号\r\n      regPassword: /^.*([0-9]{6,12}).*/, // 正则验证手机号\r\n      regSms: /^.*([0-9]{6}).*/, // 正则验证手机号\r\n\r\n      // 判断用户是否发送验证码\r\n      isYzm: true,\r\n\r\n      tips: \"发送验证码\",\r\n      num: 10,\r\n\r\n      loading: false, // 加载状态\r\n    };\r\n  },\r\n  methods: {\r\n    // 退后一步\r\n    back() {\r\n      this.$router.push({\r\n        path: \"/register\",\r\n      });\r\n    },\r\n\r\n    // 发送验证码   两种方式  老师讲的第二种\r\n    sendYzm() {\r\n      // e.preventDefault();\r\n      // // alert(111);\r\n      // console.log(this.username);\r\n      // if (!this.regUsername.test(this.username)) {\r\n      //   this.$toast(\"请输入正确的手机号\");\r\n      // } else {\r\n      //   userSendSms({\r\n      //     mobile: this.username,\r\n      //     type: \"register\",\r\n      //   })\r\n      //     .then((res) => {\r\n      //       console.log(res);\r\n      //       this.$toast(res.message);\r\n      //     })\r\n      //     .catch((err) => {\r\n      //       console.log(err);\r\n      //     });\r\n      // }\r\n\r\n      // console.log(this.$refs.form);\r\n\r\n      if (!this.isYzm) return;\r\n\r\n      this.$refs.form\r\n        .validate(\"username\")\r\n        .then((res) => {\r\n          this.isYzm = false; //如果为不可点击状态 就让逻辑中断\r\n\r\n          this.loading = true;\r\n          // axios\r\n          return userSendSms({\r\n            mobile: this.username,\r\n            type: \"register\",\r\n          });\r\n        })\r\n        .then(({ data, msg, code }) => {\r\n          if (code === 0) {\r\n            this.loading = false;\r\n\r\n            this.$toast(msg + data);\r\n            console.log(data);\r\n            this.tips = this.num + \"秒后在获取吧\";\r\n\r\n            times = setInterval(() => {\r\n              this.num--;\r\n              this.tips = this.num + \"秒后在获取吧\";\r\n              console.log(this.num);\r\n              if (this.num <= 0) {\r\n                this.tips = \"再次获取\";\r\n                this.num = 10;\r\n                clearInterval(times);\r\n                this.isYzm = true;\r\n              }\r\n            }, 1000);\r\n          } else {\r\n            this.$toast(msg);\r\n            this.isYzm = true;\r\n            this.loading = false;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          this.isYzm = true;\r\n          this.loading = false;\r\n        });\r\n    },\r\n\r\n    // 提交全部信息\r\n    // 提交的时候获取账号和密码注册账号\r\n    onSubmit(values) {\r\n      console.log(\"submit\", values);\r\n      userReg(values).then((err) => {\r\n        console.log(err);\r\n      });\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(times);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.top {\r\n  display: flex;\r\n  height: 50px;\r\n  background: red;\r\n  align-items: center;\r\n  padding: 0 10px;\r\n  span {\r\n    display: block;\r\n    width: 20px;\r\n  }\r\n  div {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    a {\r\n      color: #fff;\r\n      margin: 0 3px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=08622b98&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=08622b98&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08622b98\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","back","_v","ref","onSubmit","required","message","pattern","regUsername","model","value","username","callback","$$v","expression","regPassword","password","regSms","scopedSlots","_u","key","fn","loading","sendYzm","_s","tips","proxy","vercode","staticStyle","staticRenderFns","times","name","components","data","isYzm","num","methods","path","validate","then","mobile","type","msg","code","console","clearInterval","catch","userReg","beforeDestroy","component"],"sourceRoot":""}