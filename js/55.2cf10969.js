"use strict";(self["webpackChunkheadline"]=self["webpackChunkheadline"]||[]).push([[55],{462:function(e,s,t){t.r(s),t.d(s,{default:function(){return v}});var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login"},[s("div",{staticClass:"top"},[s("span",[s("van-icon",{attrs:{name:"arrow-left",color:"#ffffff"},on:{click:e.back}})],1),s("div",[s("router-link",{attrs:{to:"/register"}},[e._v("登录")]),s("a",[e._v("/")]),s("router-link",{attrs:{to:"/login"}},[e._v("注册")])],1)]),s("div",{staticClass:"registerForm"},[s("van-form",{ref:"form",on:{submit:e.onSubmit}},[s("van-field",{attrs:{name:"username",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写用户名"},{pattern:e.regUsername,message:"请输入正确的手机号"}]},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),s("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{pattern:e.regPassword,message:"请输入6-12位的密码"}]},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),s("div",{staticClass:"yzm"},[s("van-field",{attrs:{name:"vercode",center:"",clearable:"",rules:[{pattern:e.regSms,message:"请输入6位的验证码"}],label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[s("van-button",{attrs:{loading:e.loading,size:"small",type:"primary"},on:{click:e.sendYzm}},[e._v(e._s(e.tips))])]},proxy:!0}]),model:{value:e.vercode,callback:function(s){e.vercode=s},expression:"vercode"}})],1),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],1)])},n=[],r=(t(1958),t(2939),t(4958)),i=(t(7505),t(7061)),o=(t(1049),t(140)),l=(t(8984),t(797)),m=(t(7658),t(2223));let u=null;var c={name:"Login",components:{[l.Z.name]:l.Z,[o.Z.name]:o.Z,[i.Z.name]:i.Z,[r.Z.name]:r.Z},data(){return{username:"",password:"",vercode:"",regUsername:/^1[345789]\d{9}$/,regPassword:/^.*([0-9]{6,12}).*/,regSms:/^.*([0-9]{6}).*/,isYzm:!0,tips:"发送验证码",num:10,loading:!1}},methods:{back(){this.$router.push({path:"/register"})},sendYzm(){this.isYzm&&this.$refs.form.validate("username").then((e=>(this.isYzm=!1,this.loading=!0,(0,m.yv)({mobile:this.username,type:"register"})))).then((({data:e,msg:s,code:t})=>{0===t?(this.loading=!1,this.$toast(s+e),console.log(e),this.tips=this.num+"秒后在获取吧",u=setInterval((()=>{this.num--,this.tips=this.num+"秒后在获取吧",console.log(this.num),this.num<=0&&(this.tips="再次获取",this.num=10,clearInterval(u),this.isYzm=!0)}),1e3)):(this.$toast(s),this.isYzm=!0,this.loading=!1)})).catch((e=>{console.log(e),this.isYzm=!0,this.loading=!1}))},onSubmit(e){console.log("submit",e),(0,m.u5)(e).then((e=>{console.log(e)}))}},beforeDestroy(){clearInterval(u)}},d=c,h=t(1001),p=(0,h.Z)(d,a,n,!1,null,"08622b98",null),v=p.exports},7505:function(e,s,t){t(1958),t(3332),t(6742),t(3094),t(7984)}}]);
//# sourceMappingURL=55.2cf10969.js.map