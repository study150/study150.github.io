"use strict";(self["webpackChunkheadline"]=self["webpackChunkheadline"]||[]).push([[840],{1772:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search"},[t("div",{staticClass:"top"},[t("form",{attrs:{action:"/"}},[t("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{input:e.onSearch},scopedSlots:e._u([{key:"left",fn:function(){return[t("div",{on:{click:function(t){return e.$router.back()}}},[e._v("返回")])]},proxy:!0},{key:"action",fn:function(){return[t("div",{on:{click:e.onSearchsou}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.key_word,callback:function(t){e.key_word="string"===typeof t?t.trim():t},expression:"key_word"}})],1)]),t("div",{staticClass:"list"},[t("van-list",{directives:[{name:"show",rawName:"v-show",value:e.key_word.length,expression:"key_word.length"}]},e._l(e.listArr,(function(r,a){return t("van-cell",{key:a,attrs:{title:r.title},on:{click:function(t){return e.canshu(r.title)}}})})),1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.key_word.length,expression:"!key_word.length"}],staticClass:"recommended"},[e._m(0),t("div",{staticClass:"history"},[t("p",[e._v("历史搜索")]),t("div",{staticClass:"historyList"},e._l(e.search_history,(function(r,a){return t("van-cell",{key:a,on:{click:function(t){return e.clickHistory(r.value)}}},[t("van-icon",{attrs:{name:"clock-o",border:!1}}),e._v(" "+e._s(r.value)+" ")],1)})),1),t("span",{directives:[{name:"show",rawName:"v-show",value:e.search_history.length,expression:"search_history.length"}],staticClass:"clearhistory",on:{click:e.clearhistory}},[e._v("清空历史记录")])])])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tuijian"},[t("p",[e._v("大家都在搜")]),t("ul",[t("li",[e._v("1111111111111111")]),t("li",[e._v("11111111111111111")]),t("li",[e._v("111111122111111111")]),t("li",[e._v("111111111111111111331")])])])}],o=(r(7322),r(6631)),s=(r(6791),r(4269)),i=(r(1049),r(140)),c=(r(1958),r(3332),r(6742),r(3094),r(7984),r(3915)),l=r.n(c),h=r(9299),u=r(855),d=r(4771),v=r(5781),y=r(7061),f=(0,u.d)("search"),_=f[0],k=f[1],p=f[2];function g(e,t,r,a){function n(){if(r.label||t.label)return e("div",{class:k("label")},[r.label?r.label():t.label])}function o(){if(t.showAction)return e("div",{class:k("action"),attrs:{role:"button",tabindex:"0"},on:{click:n}},[r.action?r.action():t.actionText||p("cancel")]);function n(){r.action||((0,d.j8)(a,"input",""),(0,d.j8)(a,"cancel"))}}var s={attrs:a.data.attrs,on:(0,h.Z)({},a.listeners,{keypress:function(e){13===e.keyCode&&((0,v.PF)(e),(0,d.j8)(a,"search",t.value)),(0,d.j8)(a,"keypress",e)}})},i=(0,d.ED)(a);return i.attrs=void 0,e("div",l()([{class:k({"show-action":t.showAction}),style:{background:t.background}},i]),[null==r.left?void 0:r.left(),e("div",{class:k("content",t.shape)},[n(),e(y.Z,l()([{attrs:{type:"search",border:!1,value:t.value,leftIcon:t.leftIcon,rightIcon:t.rightIcon,clearable:t.clearable,clearTrigger:t.clearTrigger},scopedSlots:{"left-icon":r["left-icon"],"right-icon":r["right-icon"]}},s]))]),o()])}g.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var w=_(g),m=(r(541),r(7658),r(8185));let b=null;var S={name:"Search",components:{[w.name]:w,[i.Z.name]:i.Z,[s.Z.name]:s.Z,[o.Z.name]:o.Z},data(){return{key_word:"",listArr:[],search_history:[]}},created(){let e=localStorage.getItem("search_history");e&&(this.search_history=JSON.parse(e),console.log(this.search_history))},beforeDestroy(){clearTimeout(b),b=null},methods:{onSearch(e){b&&clearTimeout(b),b=setTimeout((()=>{let{key_word:e}=this;(0,m.O)({key_word:e}).then((({code:e,count:t,data:r})=>{0===e&&(console.log(r),this.listArr=r)}))}),500)},onSearchsou(){let{key_word:e,search_history:t}=this,r=t.findIndex((t=>t.value===e));r>=0&&t.splice(r,1),t.unshift({value:e,timestamp:+new Date}),localStorage.setItem("search_history",JSON.stringify(t)),this.$router.push({path:"/SearchCount",query:{key_word:e}})},canshu(e){console.log(e),this.key_word=e,this.onSearchsou()},clearhistory(){localStorage.removeItem("search_history"),this.search_history=[]},clickHistory(e){this.key_word=e,this.onSearchsou()}}},C=S,x=r(1001),I=(0,x.Z)(C,a,n,!1,null,"2aaa1bc1",null),Z=I.exports},7322:function(e,t,r){r(1958),r(3332),r(6742),r(3094)},8185:function(e,t,r){r.d(t,{O:function(){return n}});var a=r(2470);const n=e=>a.Z.post("/api/search",e)}}]);
//# sourceMappingURL=840.9ea6ef54.js.map