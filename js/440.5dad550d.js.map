{"version":3,"file":"js/440.5dad550d.js","mappings":"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","sources":["webpack://headline/./src/components/GlobalList/index.vue","webpack://headline/src/components/GlobalList/index.vue","webpack://headline/./src/components/GlobalList/index.vue?7b17","webpack://headline/./src/components/GlobalList/index.vue?ed75","webpack://headline/./src/views/myUtils/MyCollect.vue","webpack://headline/src/views/myUtils/MyCollect.vue","webpack://headline/./src/views/myUtils/MyCollect.vue?3a1f","webpack://headline/./src/views/myUtils/MyCollect.vue?f627","webpack://headline/./src/api/publish.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.apiSearchAPI},scopedSlots:_vm._u([{key:\"finished\",fn:function(){return [_vm._t(\"finished\",null,{\"len\":_vm.list.length})]},proxy:true},{key:\"loading\",fn:function(){return [_c('div',[_c('LoadingSvg')],1)]},proxy:true}],null,true),model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_vm._t(\"default\",null,{\"list\":_vm.list})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"apiSearchAPI\"\r\n    >\r\n      <!-- 将数据传给要用的组件 -->\r\n      <slot :list=\"list\"></slot>\r\n\r\n      <template #finished>\r\n        <slot name=\"finished\" :len=\"list.length\"></slot>\r\n      </template>\r\n\r\n      <template #loading>\r\n        <div>\r\n          <LoadingSvg />\r\n        </div>\r\n      </template>\r\n    </van-list>\r\n\r\n    <!-- {{ list }} -->\r\n    <!-- {{ skip }} -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { apiSearch } from \"@/api/search.js\";\r\n\r\nimport { List } from \"vant\";\r\n\r\nimport LoadingSvg from \"@/components/LoadingSvg.vue\";\r\n\r\n// 引入list组件\r\n\r\nexport default {\r\n  name: \"GlobalList\",\r\n\r\n  props: {\r\n    API: {\r\n      type: Function,\r\n      //   defu\r\n    },\r\n\r\n    // 可以利用props的默认值指定条数\r\n    limit: {\r\n      type: Number,\r\n      default: 8,\r\n    },\r\n  },\r\n  components: {\r\n    [List.name]: List,\r\n    [LoadingSvg.name]: LoadingSvg,\r\n    // ArticleList,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      skip: 0,\r\n      // limit: 10,\r\n      list: [], // 循环的评论内容\r\n\r\n      loading: false,\r\n      finished: false,\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    //   key_word() {\r\n    //     return this.$route.query.key_word;\r\n    //   },\r\n  },\r\n  mounted() {\r\n    // console.log(this.$attrs);\r\n    // console.log(this.limit);\r\n    // console.log(this.skip);\r\n    // console.log(this.API);\r\n    // $attrs  获取到父级传过来的数据但是没有用props接收的数据\r\n  },\r\n\r\n  methods: {\r\n    apiSearchAPI() {\r\n      let { skip, limit, API, $attrs } = this;\r\n      API({ ...$attrs, skip, limit }).then((res) => {\r\n        console.log(res);\r\n\r\n        this.list.push(...res.data);\r\n\r\n        let len = this.list.length;\r\n\r\n        // console.log(this.list.length);\r\n        this.finished = len >= res.count;\r\n\r\n        this.loading = false;\r\n\r\n        this.skip = len;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=010282f5&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"010282f5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"head\"},[_c('van-nav-bar',{attrs:{\"title\":\"收藏\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1),_c('global-list',{attrs:{\"API\":_vm.API,\"user_id\":_vm.user_id},scopedSlots:_vm._u([{key:\"default\",fn:function({ list }){return [_c('article-list',{attrs:{\"list\":list}})]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"head\">\r\n      <van-nav-bar\r\n        title=\"收藏\"\r\n        left-text=\"返回\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n      />\r\n    </div>\r\n    <global-list :API=\"API\" :user_id=\"user_id\">\r\n      <template v-slot=\"{ list }\">\r\n        <article-list :list=\"list\"></article-list>\r\n      </template>\r\n    </global-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nimport GlobalList from \"../../components/GlobalList/index.vue\";\r\n\r\nimport ArticleList from \"../../components/ArticleList/index.vue\";\r\n\r\nimport { get_fav_list as API } from \"@/api/publish.js\";\r\nexport default {\r\n  name: \"MyCollect\",\r\n  components: {\r\n    [GlobalList.name]: GlobalList,\r\n    [ArticleList.name]: ArticleList,\r\n  },\r\n  computed: {\r\n    ...mapState(\"userModules\", [\"userInfo\"]),\r\n    // uid() {\r\n    //   return this.$store.state.userModules.uid;\r\n    // },\r\n\r\n    user_id() {\r\n      return this.$store.state.userModules.userInfo._id;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      API,\r\n      //   user_id: this.userInfo._id,\r\n    };\r\n  },\r\n  mounted() {\r\n    console.log(this.userInfo);\r\n    // console.log(this.API());\r\n  },\r\n\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$toast(\"返回\");\r\n      this.$router.back();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyCollect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyCollect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyCollect.vue?vue&type=template&id=2624890a&\"\nimport script from \"./MyCollect.vue?vue&type=script&lang=js&\"\nexport * from \"./MyCollect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import request from './request'\r\n\r\nimport config from \"@/config\";\r\n\r\nexport const apiAddArticle = (p) => request.post('/api/add_article', p)\r\n\r\nexport const uploadToken = () => request.get('/upload/token')\r\n\r\nexport const qiNiUp = (p) => request.post('https://upload-z1.qiniup.com', p)\r\n\r\n\r\n// 我的发布\r\n\r\nexport const get_user_article_list = (p) => request.post('/api/get_user_article_list', p)\r\n\r\n// 我的收藏\r\nexport const get_fav_list = (p) => request.post('/api/get_fav_list', p)\r\n\r\n\r\n\r\n// 生成文件名字\r\n// export const createFileName = (type) => {\r\n\r\n// },\r\n\r\nexport const createFileName = (type) => {\r\n    let _name = Math.random().toString(16).slice(2)\r\n    _name += +new Date()\r\n    if (type) {\r\n        return _name + \".\" + type\r\n    }\r\n\r\n    return _name\r\n}\r\n\r\n// // 上传到七牛云\r\n// upDataQiNi(formdata) {\r\n//     return qiNiUp(formdata);\r\n// },\r\n\r\n\r\n\r\nexport const uploadFile = async (file) => {\r\n    let result\r\n    try {\r\n        let { token } = await uploadToken()   //生成上传凭证\r\n\r\n\r\n        // let file = this.fileList[0].file;\r\n        let type = file.type.split(\"/\")[1]\r\n        let key = createFileName(type)\r\n\r\n\r\n\r\n        let formdata = new FormData()\r\n\r\n        formdata.append(\"file\", file)\r\n        formdata.append(\"key\", key)\r\n        formdata.append(\"token\", token)\r\n\r\n\r\n        result = await qiNiUp(formdata)\r\n        // console.log(result)\r\n\r\n    } catch (error) {\r\n        return Promise.reject(error)\r\n    }\r\n    return config.baseImgUrl + result.key\r\n}"],"names":["render","_vm","this","_c","_self","attrs","finished","on","apiSearchAPI","scopedSlots","_u","key","fn","_t","list","length","proxy","model","value","loading","callback","$$v","expression","staticRenderFns","name","props","API","type","limit","default","components","data","skip","computed","mounted","methods","$attrs","console","component","staticClass","onClickLeft","user_id","apiAddArticle","p","request","uploadToken","qiNiUp","get_user_article_list","get_fav_list","createFileName","_name","Math","random","toString","slice","Date","uploadFile","async","result","token","file","split","formdata","FormData","append","error","Promise","reject","config"],"sourceRoot":""}